<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Créez votre generateur Yeoman</title>
	<!-- bower:css -->
	<link rel="stylesheet" href="vendor/normalize-css/normalize.css" />
	<link rel="stylesheet" href="vendor/font-awesome/css/font-awesome.css" />
	<link rel="stylesheet" href="vendor/highlightjs/styles/tomorrow.css" />
	<link rel="stylesheet" href="vendor/ruban/css/ruban.min.css" />
	<!-- endbower -->
	<link rel="stylesheet" href="vendor/ruban/css/ruban-print.min.css" media="print" />
	<link rel="stylesheet" href="css/style.css"/>

	<!-- bower:js -->
	<script src="vendor/jquery/jquery.js"></script>
	<script src="vendor/keymaster/keymaster.js"></script>
	<script src="vendor/hammerjs/hammer.js"></script>
	<script src="vendor/highlightjs/highlight.pack.js"></script>
	<script src="vendor/ruban/js/ruban.min.js"></script>
	<!-- endbower -->

	<script src="js/app.js"></script>
</head>

<body>

<section class="center" id="first-slide">
	<div>
		<img src="img/logo-web2day.png" alt="Web2Day"/>
		<h1>Créez votre propre générateur Yeoman</h1>
		<p>Thierry LAU</p>
		<i class="fa fa-twitter"></i><a href="http://www.twitter.com/laut3rry"> laut3rry</a>
	</div>
</section>

<section id="bio" class="no-toc animate">
	<h1>Thierry LAU</h1>
	<img class="arthur" src="img/arthur.png" alt=""/>
	<ul class="steps">
		<li><i class="fa fa-html5"></i>Développeur Front End</li>
		<li class="sfeir"><i class="fa fa-sfeir"></i><a href="http://www.sfeir.com/">SFEIR</a></li>
		<li><i class="fa fa-google-plus"></i><a href="http://gplus.to/html5css3fr ">HTML5 * CSS3 [FR]</a></li>
		<li><img class="logo" src="img/angularjs.png" alt=""/><a href="www.meetup.com/AngularJS-Paris/">Meetup AngularJS Paris</a></li>
		<li><i class="fa fa-github"></i><a href="http://lauterry.github.io/generator-ngtailor/">generator-ngtailor</a></li>
	</ul>
</section>

<section class="center" id="what-is-yeoman">
	<div>
		<img class="picture" src="img/yeoman.png" alt="Yeoman"/>
		<i class="fa fa-question"></i>
	</div>
</section>

<section>
	<p>Yeoman est un générateur de projet et workflow Front End qui s'appuie sur ...</p>
</section>

<section  class="center">
	<div>
		<img src="img/yeoman-tools.png" alt="Yeoman"/>
	</div>
</section>

<section>
	<h1></h1>
	<ul class="steps">
		<li><p>Crée l'arborescence de votre projet</p></li>
		<li><p>Prépare votre workflow Front End (Grunt)</p></li>
		<li><p>Récupère les dépendances de votre projet</p></li>
	</ul>
</section>

<section class="center">
	<div>
		<h1>Installer Yeoman</h1>
		<pre><code class="bash bigger">npm install -g yo</code></pre>
	</div>
</section>

<section class="center">
	<div>
		<h1>Installer un générateur</h1>
		<pre><code class="bash bigger">npm install -g generator-angular</code></pre>
	</div>
</section>

<section>
	<h1>Générateurs</h1>
	<ul class="steps">
		<li>generator-angular</li>
		<li>generator-backbone</li>
		<li>generator-ember</li>
		<li>generator-ionic</li>
		<li>generator-flight</li>
		<li>generator-ngtailor</li>
		<li><b>plus de 730</b></li>
	</ul>
	<details open="open">
		<summary>Notes</summary>
		<p>
			Expliquer la notion de générateurs et présenter quelques générateurs officiel et ceux de la communauté
		</p>
	</details>
</section>

<section class="center">
	<div>
		<h1>Générer votre projet</h1>
		<pre><code class="bash bigger">yo angular</code></pre>
	</div>
</section>

<section class="no-toc">
	<h1>Résultat en gif animé</h1>
</section>

<section>
	<img class="picture full" src="img/yo-angular.gif" alt=""/>
</section>

<section>
	<h1></h1>
	<ul class="steps">
		<li><p>Trop de choses ?</p></li>
		<li><p>Pas assez de choses ?</p></li>
		<li><p>Ne répond pas à mes besoins ?</p></li>
		<li><p><b>Créez votre propre générateur</b></p></li>
	</ul>
</section>

<section>
	<p>Créer un générateur Yeoman</p>
	<ul class="steps">
		<li><p><i class="fa fa-user"></i> pour vous</p></li>
		<li><p><i class="fa fa-users"></i> pour votre équipe</p></li>
		<li><p><i class="fa fa-globe"></i> pour la communauté</p></li>
	</ul>
</section>

<section>
	<div>
		<h1>Vous aimez <a href="http://loicfrering.github.io/ruban/">RubanJS ?</a></h1>
		<p>par Loïc Frering <small><i class="fa fa-twitter"></i><a href="https://twitter.com/loicfrering">@loicfrering</a></small></p>
	</div>
</section>

<section>
	<h2>Et si on codait un générateur Ruban ?</h2>
</section>

<section>
	<h2>Il nous faut un générateur de générateur</h2>
	<ul class="steps">
		<li>
			<pre><code class="bash bigger">npm install -g generator-generator</code></pre>
		</li>
		<li>
			<pre><code class="bash bigger">yo generator</code></pre>
		</li>
	</ul>
</section>

<section class="no-toc">
	<h1><i class="fa fa-play"></i> DEMO</h1>
</section>

<section class="animate">
	<h1>Essayer votre générateur</h1>
	<p>Créer un lien global vers votre générateur</p>
	<p><pre  class="slide-to-right"><code class="bash bigger">npm link</code></pre></p>
</section>

<section>
	<h1><i class="fa fa-film"></i> Actions</h1>
</section>

<section>
	<pre><code class="javascript">
var yeoman = require('yeoman-generator');

yeoman.generators.base.extend({

	step1 : function () {
		// action 1
	},

	step2 : function () {
		// action 2
	},

	step3 : function () {
		// action 3
	}

});
	</code></pre>
</section>

<section>
	<h1><i class="fa fa-lightbulb-o"></i> A retenir</h1>
	<ul class="steps">
		<li><p>Une action est automatiquement appelée par le générateur si elle est définie dans le prototype de celui-ci</p></li>
		<li><p>Chaque action est appelée dans l'ordre de déclaration</p></li>
	</ul>
</section>

<section>
	<p>Et si je ne veux pas que le générateur appelle ma fonction ?</p>
	<pre><code class="javascript smaller">
yeoman.generators.base.extend({

	step1 : function () {},

	step2 : function () {},

	step3 : function () {
		this._stepNotCalled();
	},

	_stepNotCalled : function () {}

});
	</code></pre>
</section>

<section>
	<h1><i class="fa fa-user"></i> Intéragir avec l'utilisateur</h1>
</section>

<section class="animate">
	<div>
		<h1>Prompts</h1>
		<a class="slide-to-right" href="https://github.com/SBoudrias/Inquirer.js">Inquirer.js</a>
	</div>
</section>


<section class="center" id="prompt-list">
	<div>
		<pre><code class="javascript bigger">
{ type : "list" }
		</code></pre>
		<img class="picture" src="img/inquirer-list.png" alt="inquirer list"/>
	</div>
</section>

<section class="center" id="prompt-confirm">
	<div>
	<pre><code class="javascript bigger">
{ type : "confirm" }
	</code></pre>
		<img class="picture" src="img/inquirer-confirm.png" alt="inquirer confirm"/>
	</div>
</section>

<section class="center" id="prompt-checkbox">
	<div>
		<pre><code class="javascript bigger">
{ type : "checkbox" }
		</code></pre>
		<img class="picture" src="img/inquirer-checkbox.png" alt="inquirer checkbox"/>
	</div>
</section>

<section>
	<pre><code class="javascript smaller">
yeoman.generators.Base.extend({

	prompt: function () {

		var done = this.async();

		this.prompt([{
			type    : "input",
			name    : "name",
			message : "Your project name",
			default : "A Cool project"
		}], function (answers) {
			console.log(answers.name);
			done();
		});

	}

})
	</code></pre>
</section>

<section class="no-toc">
	<h1><i class="fa fa-play"></i> DEMO</h1>
</section>

<section>
	<h1><i class="fa fa-file-text-o"></i> Intéragir avec les fichiers</h1>
</section>

<section>
	<div>
		<h1><i class="fa fa-upload"></i> Source</h1>
		<p><pre><code class="bash bigger">par défault <i class="fa fa-folder"></i> ../templates</code></pre></p>
		<pre><code class="javascript bigger">this.src.readJSON('package.json')</code></pre>
	</div>
</section>

<section>
	<div>
		<h1><i class="fa fa-download"></i> Destination</h1>
		<pre><code class="javascript big">this.dest.copy('app.js', 'dist/app.js')</code></pre>
	</div>
</section>

<section>
	<h1><i class="fa fa-file-code-o"></i> Templating</h1>
	<ul class="steps">
		<li><p><a href="devdocs.io/lodash/index#template">Lodash</a></p></li>
		<li><p><a href="http://epeli.github.io/underscore.string/">Underscore.string</a></p></li>
	</ul>
</section>

<section>
	<div>
		<p>_index.html</p>
		<pre><code class="html">
&lt;head&gt;
	&lt;title&gt;&lt;%= app %&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;% if (greeting) {%&gt;
&lt;p&gt;Hello &lt;%= _.humanize(name) %&gt;&lt;/p&gt;
&lt;% } %&gt;

&lt;/body&gt;
&lt;/html&gt;
		</code></pre>
	</div>
</section>

<section>
	<pre><code class="javascript big">this.template('_index.html', 'index.html')</code></pre>
</section>

<section>
	<div>
		<p>index.html</p>
		<pre><code class="html">
&lt;head&gt;
	&lt;title&gt;My App&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;p&gt;Hello Dev2day&lt;/p&gt;

&lt;/body&gt;
&lt;/html&gt;
		</code></pre>
	</div>
</section>

<section class="no-toc">
	<h1><i class="fa fa-play"></i> DEMO</h1>
</section>

<section>
	<h1><i class="fa fa-link"></i> Gérer les dépendances</h1>
</section>

<section class="center">
	<div>
		<h1>npm</h1>
		<pre><code class="javascript bigger">
this.npmInstall()
		</code></pre>
	</div>
</section>

<section class="center">
	<div>
		<h1>bower</h1>
		<pre><code class="javascript bigger">
this.bowerInstall()
		</code></pre>
	</div>
</section>

<section class="center">
	<div>
		<h1>npm + bower</h1>
		<pre><code class="javascript bigger">
this.installDependencies()
		</code></pre>
	</div>
</section>

<section>
	<h1><i class="fa fa-lightbulb-o"></i> A retenir</h1>
	<ul class="steps">
		<li><p>this.installDependencies() peut être appelé n'importe où dans votre code</p></li>
		<li><p><code class="bash">npm install</code> et <code class="bash">bower install</code> seront exécutés à la fin des actions</p></li>
	</ul>
</section>

<section>
	<h1><i class="fa fa-flag"></i> Finalisation</h1>
</section>

<section>
	<p>Effectuer des tâches quand toutes les actions ont été réalisées</p>
</section>

<section>
	<pre><code class="javascript">

yeoman.generators.Base.extend({
	init: function () {
		this.on('end', function () {
			// tâches finales
		});
	}
});
	</code></pre>
</section>

<section>
	<h1>Exemples</h1>
	<ul class="steps">
		<li><p>Afficher un message en couleurs avec <a href="https://github.com/sindresorhus/chalk">chalk</a></p></li>
		<li><p>Importer vos JS et CSS dans index.html avec <a href="https://github.com/stephenplusplus/wiredep">wiredep</a></p></li>
	</ul>
</section>

<section class="no-toc">
	<h1><i class="fa fa-play"></i> DEMO</h1>
</section>

<section>
	<h1><i class="fa fa-file-code-o"></i> Gruntfile Editor API</h1>
</section>

<section>
	<h1>Gruntfile</h1>
	<ul class="steps">
		<li><p>important car définit votre workflow</p></li>
		<li><p>un des fichiers les plus édités par les générateurs</p></li>
		<li><p>peut être pollué par le code de templating</p></li>
	</ul>
</section>

<section>
	<div>
		<img class="picture" src="img/before-gruntfile-editor-api.jpg" alt=""/>
	</div>
</section>

<section>
	<h1></h1>
	<ul class="steps">
		<li>
			<pre><code class="javascript smaller">
this.gruntfile.insertConfig("clean", "{build: ['dist']}");
			</code></pre>
		</li>
		<li>
			<pre><code class="javascript smaller">
grunt.initConfig({
    clean: {
	   build : ['dist']
    }
});
			</code></pre>
		</li>
		<li>
			<pre><code class="javascript smaller">
this.gruntfile.registerTask('build', ['compass', 'uglify']);
			</code></pre>
		</li>
		<li>
			<pre><code class="javascript smaller">
grunt.registerTask('build', ['compass', 'uglify']);
			</code></pre>
		</li>
	</ul>
</section>

<section>
	<h1><i class="fa fa-warning"></i> Attention</h1>
	<ul class="steps">
		<li><p>A partir de yeoman-generator 0.17 seulement</p></li>
	</ul>
</section>

<section class="center">
	<div>
		<img class="picture "src="img/yeoman_0.17.jpg" alt=""/>
	</div>
</section>

<section class="no-toc">
	<h1><i class="fa fa-play"></i> DEMO</h1>
</section>

<section>
	<h1><i class="fa fa-check-circle-o"></i> Tester vos générateurs</h1>
</section>

<section>
	<h1>Tester quoi ?</h1>
	<ul class="steps">
		<li><p>présence ou absence de fichier</p></li>
		<li><p>contenu du fichier</p></li>
	</ul>
</section>

<section>
	<h1>Comment ?</h1>
	<ul class="steps">
		<li>Créer un répertoire de test</li>
		<li>Créer le générateur</li>
		<li>Mocker</li>
		<li>Appeler le générateur</li>
		<li>Vérifier les assertions</li>
	</ul>
</section>

<section id="test-helpers">
	<h1>Test Helpers</h1>
	<ul class="steps">
		<li>
			<pre><code class="javascript big">
var helpers = require('yeoman-generator').test;
			</code></pre>
		</li>
	</ul>
</section>

<section>
	<pre><code class="javascript">
before(function (done) {

  helpers.run('../generators/app')
    .inDir('./tmp')
    .withOptions({ foo: 'bar' })
    .withArguments(['name-x'])
    .withPrompt({ coffee: false })
    .onEnd(done)

})
	</code></pre>
</section>

<section>
	<h1><i class="fa fa-lightbulb-o"></i> Conseil</h1>
	<ul class="steps">
		<li><p>Préférez les chemins absolus pour éviter les comportements imprévisibles</p></li>
		<li>
			<pre><code class="javascript smaller">
var path = require('path');

before(function (done) {

  helpers.run(path.join( __dirname, '../app'))
    .inDir(path.join( __dirname, './tmp'))
	...

})
			</code></pre>
		</li>
	</ul>
</section>

<section id="assert-helpers">
	<h1>Assert Helpers</h1>
	<ul class="steps">
		<li>
			<pre><code class="javascript big">
var assert = require('yeoman-generator').assert;
			</code></pre>
		</li>
	</ul>
</section>

<section id="assert-api">
	<h1></h1>
	<ul class="steps">
		<li>
			<pre><code class="javascript">
assert.file(path);
			</code></pre></li>
		<li>
		<pre><code class="javascript">
assert.noFile(path);
			</code></pre></li>
		</li>
		<li>
			<pre><code class="javascript">
assert.fileContent(path, regex);
			</code></pre></li>
		</li>
		<li>
			<pre><code class="javascript">
assert.noFileContent(path, regex);
			</code></pre></li>
		</li>
	</ul>
</section>

<section class="no-toc">
	<h1><i class="fa fa-play"></i> DEMO</h1>
</section>

<section>
	<h1><i class="fa fa-gear"></i> Sub-generators</h1>
</section>

<section>
	<pre><code class="javascript bigger">
yo generator:subgenerator "name"
	</code></pre>
</section>

<section>
	<h1>Exemples</h1>
	<ul class="steps">
		<li>
			<pre><code class="javascript bigger">yo angular:filter "monFiltre"</code></pre></li>
		<li>
			<pre><code class="javascript bigger">yo backbone:model "monModel"</code></pre>
		</li>
		</li>
		<li>
			<pre><code class="javascript bigger">yo ember:controller "monController"</code></pre></li>
		</li>
		<li>
			<pre><code class="javascript bigger"><b>yo ruban:slide "titreDuSlide"</b></code></pre></li>
		</li>
	</ul>
</section>

<section>
	<h1></h1>
	<ul class="steps">
		<li>
			<p>Fonctionne comme un générateur Yeoman</p>
		</li>
	</ul>
</section>

<section>
	<h1></h1>
	<ul class="steps">
		<li>
			<pre><code class="javascript bigger">yo ruban:slide "titreDuSlide"</code></pre></li>
			<pre><code class="javascript bigger">
yeoman.generators.nameBase.extend({
  step : function() {
      console.log(this.name);
      // titreDuSlide
  }
})
			</code></pre>
		</li>
	</ul>
</section>

<section class="no-toc">
	<h1><i class="fa fa-play"></i> DEMO</h1>
</section>

<section>
	<h1><i class="fa fa-database"></i> Yeoman Storage API</h1>
</section>

<section>
	<p>Sauvegarder des données</p>
	<p>Partager des données entre générateurs et sous-générateurs</p>
</section>

<section>
	<p>.yo-rc.json</p>
	<p>
		<pre><code class="json">
{
   "generator-backbone": {
      "requirejs": true,
      "coffee": true
   },
   "generator-gruntfile": {
      "compass": false
   }
}
		</code></pre>
	</p>
</section>

<section id="yeoman-storage-api">
	<h1></h1>
	<ul class="steps">
		<li>
			<p><pre><code class="javascript">this.config.set(key, value)</code></pre></p>
		</li>
		<li>
			<p><pre><code class="javascript">this.config.get(key)</code></pre></p>
		</li>
		</li>
		<li>
			<p><pre><code class="javascript">this.config.delete(key)</code></pre></li></p>
		</li>
	</ul>
</section>

<section class="no-toc">
	<h1><i class="fa fa-play"></i> DEMO</h1>
</section>

<section>
	<h1><i class="fa fa-share-alt"></i> Composabilité</h1>
</section>

<section>
	<p>Un générateur pourra travailler de concert avec un autre générateur</p>
</section>

<section>
	<h1>Ingrédients</h1>
	<ul class="steps">
		<li>Gruntfile API Editor</li>
		<li>Yeoman Storage API</li>
		<li>generator.composeWith()</li>
		<li>Run Loop</li>
	</ul>
</section>

<section>
	<h1>Gruntfile Editor API</h1>
	<ul class="steps">
		<li><p>charge le Gruntfile du projet et l'enrichit</p></li>
		<li><p>sinon crée un nouveau Gruntfile par défaut s'il n'existe pas</p></li>
	</ul>
</section>

<section>
	<h1>this.composeWith()</h1>
</section>

<section>
	<p>Invoquer un générateur ou un sous générateur</p>
</section>

<section>
	<h1><i class="fa fa-refresh"></i> Run loop</h1>
</section>

<section>
	<p>Cycle de vie avec un système de priorité</p>
</section>

<section>
	<h1>Run Loop</h1>
	<p>
	<pre><code class="javascript smaller">
yeoman.generators.base.extend({
	initializing : function () {},
	prompting : function () {},
	configuring : function () {},

	default : function () {},

	writing : function () {},
	conflicts : function () {},
	install : function () {},
	end : function () {
		aStep : function () {},
		anotherStep : function () {}
	}
});
	</code></pre>
	</p>
</section>

<section>
	<h1>Conclusion</h1>
</section>

<section>
	<h1>Mes générateurs</h1>
	<ul class="steps">
		<li><p><a href="https://github.com/lauterry/generator-ngtailor"><i class="fa fa-github"></i> generator-ngtailor</a></p></li>
		<li><p><a href="https://github.com/lauterry/generator-ruban"><i class="fa fa-github"></i> generator-ruban</a></p></li>
	</ul>
</section>

<section class="center">
	<div>
		<h1>Merci</h1>
		<p><i class="fa fa-twitter"></i>@laut3rry</p>
	</div>
</section>

</body>
</html>