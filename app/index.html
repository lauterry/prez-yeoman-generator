<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Creez un generateur Yeoman</title>
	<!-- bower:css -->
	<link rel="stylesheet" href="vendor/normalize-css/normalize.css" />
	<link rel="stylesheet" href="vendor/font-awesome/css/font-awesome.css" />
	<link rel="stylesheet" href="vendor/highlightjs/styles/tomorrow.css" />
	<link rel="stylesheet" href="vendor/ruban/css/ruban.min.css" />
	<!-- endbower -->
	<link rel="stylesheet" href="vendor/ruban/css/ruban-print.min.css" media="print" />
	<link rel="stylesheet" href="css/style.css"/>

	<!-- bower:js -->
	<script src="vendor/jquery/jquery.js"></script>
	<script src="vendor/keymaster/keymaster.js"></script>
	<script src="vendor/hammerjs/hammer.js"></script>
	<script src="vendor/highlightjs/highlight.pack.js"></script>
	<script src="vendor/ruban/js/ruban.min.js"></script>
	<!-- endbower -->

	<script src="js/app.js"></script>
</head>

<body>

<section class="center">
	<div>
		<h1>Créer votre propre générateur Yeoman</h1>
		<p>Thierry LAU</p>
		<p><i class="fa fa-twitter"></i><a href="http://www.twitter.com/laut3rry"> laut3rry</a></p>
	</div>
</section>

<section id="bio">
	<h1>Thierry LAU</h1>
	<ul class="steps">
		<li><i class="fa fa-html5"></i> Développeur Front End</li>
		<li class="sfeir"><i class="fa fa-sfeir"></i> <a href="http://www.sfeir.com/">SFEIR</a></li>
		<li><i class="fa fa-google-plus"></i><a href="http://gplus.to/html5css3fr "> HTML5 * CSS3 [FR]</a></li>
		<li><i class="fa fa-github"></i><a href=""> ngTailor</a></li>
	</ul>
</section>

<section class="center" id="what-is-yeoman">
	<div>
		<img class="picture" src="img/yeoman.png" alt="Yeoman"/>
		<i class="fa fa-question"></i>
	</div>
</section>

<section>
	<p>Yeoman est un générateur de projet et workflow Front End qui s'appuie sur ...</p>
</section>

<section  class="center">
	<div>
		<img src="img/yeoman-tools.png" alt="Yeoman"/>
	</div>
</section>

<section class="center">
	<div>
		<h1>Installer Yeoman</h1>
		<pre><code class="bash">npm install -g yo</code></pre>
	</div>
</section>

<section class="center">
	<div>
		<h1>Installer un générateur</h1>
		<pre><code class="bash">npm install -g generator-angular</code></pre>
	</div>
</section>

<section>
	<h1>Générateurs</h1>
	<ul class="steps">
		<li>generator-angular</li>
		<li>generator-backbone</li>
		<li>generator-ember</li>
		<li>generator-ionic</li>
		<li>generator-flight</li>
		<li>generator-ngtailor</li>
		<li><b>plus de 730</b></li>
	</ul>
	<details open="open">
		<summary>Notes</summary>
		<p>
			Expliquer la notion de générateurs et présenter quelques générateurs officiel et ceux de la communauté
		</p>
	</details>
</section>

<section class="center">
	<div>
		<h1>Générer votre projet</h1>
		<pre><code class="bash">yo angular</code></pre>
	</div>
</section>

<section>
	<h1>Résultat</h1>
</section>

<section>
	<img class="picture full" src="img/yo-angular.gif" alt=""/>
</section>

<section>
	<h1></h1>
	<ul class="steps">
		<li><p>Trop de choses ?</p></li>
		<li><p>Pas assez de choses ?</p></li>
		<li><p>Ne répond pas à mes besoins ?</p></li>
		<li><p><b>Créer votre propre générateur</b></p></li>
	</ul>
</section>

<section>
	<div>
		<h1>Vous aimez <a href="http://loicfrering.github.io/ruban/">RubanJS ?</a></h1>
		<p>par Loïc Frering <small><i class="fa fa-twitter"></i><a href="https://twitter.com/loicfrering">@loicfrering</a></small></p>
	</div>
</section>

<section>
	<h2>Et si on codait un générateur Ruban ?</h2>
</section>

<section>
	<h1>Il nous faut un générateur de générateur</h1>
	<ul class="steps">
		<li>
			<pre><code class="bash">npm install -g generator-generator</code></pre>
		</li>
		<li>
			<pre><code class="bash">yo generator</code></pre>
		</li>
	</ul>
</section>

<section>
	<h1><i class="fa fa-film"></i> Actions</h1>
</section>

<section>
	<pre><code class="javascript">
yeoman.generators.base.extend({

	step1 : function () {
		// action 1
	},

	step2 : function () {
		// action 2
	},

	step3 : function () {
		// action 3
	}

});
	</code></pre>
</section>

<section>
	<h1><i class="fa fa-lightbulb-o"></i> A retenir</h1>
	<ul class="steps">
		<li><p>Une action est automatiquement appelée par le générateur si elle est définie dans le prototype de celui-ci</p></li>
		<li><p>Chaque action est appelée dans l'ordre de déclaration</p></li>
	</ul>
</section>

<section>
	<p>Et si je veux pas que le générateur appelle ma fonction ?</p>
	<pre><code class="javascript smaller">
yeoman.generators.base.extend({

	step1 : function () {},

	step2 : function () {},

	step3 : function () {
		this._stepNotCalled();
	},

	_stepNotCalled : function () {}

});
	</code></pre>
</section>

<section>
	<h1><i class="fa fa-user"></i> Intéragir avec l'utilisateur</h1>
</section>

<section class="animate">
	<div>
		<h1>Prompts</h1>
		<a class="slide-to-right" href="https://github.com/SBoudrias/Inquirer.js">Inquirer.js</a>
	</div>
</section>


<section class="center">
	<div>
		<pre><code class="javascript">
{ type : "list" }
		</code></pre>
		<img src="img/inquirer-list.png" alt="inquirer list"/>
	</div>
</section>

<section class="center">
	<div>
	<pre><code class="javascript">
{ type : "confirm" }
	</code></pre>
		<img src="img/inquirer-confirm.png" alt="inquirer confirm"/>
	</div>
</section>

<section class="center">
	<div>
		<pre><code class="javascript">
{ type : "checkbox" }
		</code></pre>
		<img src="img/inquirer-checkbox.png" alt="inquirer checkbox"/>
	</div>
</section>

<section>
	<pre><code class="javascript smaller">
yeoman.generators.Base.extend({

	prompt: function () {

		var done = this.async();

		this.prompt([{
			type    : "input",
			name    : "name",
			message : "Your project name",
			default : "A Cool project"
		}], function (answers) {
			console.log(answers.name);
			done();
		});

	}

})
	</code></pre>
</section>

<section>
	<h1><i class="fa fa-play"></i> DEMO</h1>
</section>

<section>
	<h1><i class="fa fa-file-text-o"></i> Intéragir avec les fichiers</h1>
</section>

<section>
	<div>
		<h1><i class="fa fa-upload"></i> Source</h1>
		<p><pre><code class="bash">par défault <i class="fa fa-folder"></i> ../templates</code></pre></p>
		<pre><code class="javascript">this.src.readJSON('package.json')</code></pre>
	</div>
</section>

<section>
	<div>
		<h1><i class="fa fa-download"></i> Destination</h1>
		<pre><code class="javascript">this.dest.copy('bower.json', 'bower.json')</code></pre>
	</div>
</section>

<section>
	<h1><i class="fa fa-file-code-o"></i> Templating</h1>
	<ul class="steps">
		<li><a href="devdocs.io/lodash/index#template">Lodash</a></li>
		<li><a href="http://epeli.github.io/underscore.string/">Underscore.string</a></li>
		<li><pre><code class="javascript">this.template('_index.html', 'index.html')</code></pre></li>
	</ul>
</section>

<section>
	<div>
		<p>_index.html</p>
		<pre><code class="html">
&lt;head&gt;
	&lt;title&gt;&lt;%= app %&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;% if (greeting) {%&gt;
&lt;p&gt;Hello &lt;%= _.humanize(name) %&gt;&lt;/p&gt;
&lt;% } %&gt;

&lt;/body&gt;
&lt;/html&gt;
		</code></pre>
	</div>
</section>

<section>
	<div>
		<p>index.html</p>
		<pre><code class="html">
&lt;head&gt;
	&lt;title&gt;My App&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;p&gt;Hello Dev2day&lt;/p&gt;

&lt;/body&gt;
&lt;/html&gt;
		</code></pre>
	</div>
</section>

<section>
	<h1><i class="fa fa-play"></i> DEMO</h1>
</section>

<section>
	<h1><i class="fa fa-link"></i> Gérer les dépendances</h1>
</section>

<section class="center">
	<div>
		<h1>npm</h1>
		<pre><code class="javascript">
this.npmInstall()
		</code></pre>
	</div>
</section>

<section class="center">
	<div>
		<h1>bower</h1>
		<pre><code class="javascript">
this.bowerInstall()
		</code></pre>
	</div>
</section>

<section class="center">
	<div>
		<h1>npm + bower</h1>
		<pre><code class="javascript">
this.installDependencies()
		</code></pre>
	</div>
</section>

<section>
	<h1><i class="fa fa-lightbulb-o"></i> A retenir</h1>
	<ul class="steps">
		<li><p>peuvent être appelées n'importe où dans votre code</p></li>
		<li><p><code class="bash">npm install</code> et <code class="bash">bower install</code> seront exécutés à la fin des actions</p></li>
	</ul>
</section>

<section>
	<h1><i class="fa fa-play"></i> DEMO</h1>
</section>

<section class="center">
	<div>
		<img class="picture "src="img/yeoman_0.17.jpg" alt=""/>
	</div>
</section>

<section>
	<h1><i class="fa fa-file-code-o"></i> Grunt Editor API</h1>
</section>

<section>
	<h1></h1>
	<ul class="steps">
		<li>
			<pre><code class="javascript smaller">
this.gruntfile.insertConfig("clean", "{build: ['dist']}");
			</code></pre>
		</li>
		<li>
			<pre><code class="javascript smaller">
grunt.initConfig({
    clean: {
	   build : ['dist']
    }
});
			</code></pre>
		</li>
		<li>
			<pre><code class="javascript smaller">
this.gruntfile.registerTask('build', ['compass', 'uglify']);
			</code></pre>
		</li>
		<li>
			<pre><code class="javascript smaller">
grunt.registerTask('build', ['compass', 'uglify']);
			</code></pre>
		</li>
	</ul>
</section>

<section>
	<h1><i class="fa fa-warning"></i> Attention</h1>
	<ul class="steps">
		<li><p>A partir de yeoman-generator 0.17 seulement</p></li>
		<li><p>... qui sortira très prochainement <i class="fa fa-smile-o"></i></p></li>
	</ul>
</section>

<section>
	<h1><i class="fa fa-play"></i> DEMO</h1>
</section>

<section>
	<h1><i class="fa fa-flag"></i> Final</h1>
</section>

<section>
	<p>Effectuer des tâches quand toutes les actions ont été réalisées</p>
</section>

<section>
	<pre><code class="javascript">

yeoman.generators.Base.extend({
   init: function () {
      this.on('end', function () {
          // tâches finales
      });
   }
});

	</code></pre>
</section>

<section>
	<h1>Exemples</h1>
	<ul class="steps">
		<li><p>Afficher un message de succès avec <a href="https://github.com/sindresorhus/chalk">chalk</a></p></li>
		<li><p>Importer vos JS et CSS dans index.html avec <a href="https://github.com/stephenplusplus/wiredep">wiredep</a></p></li>
	</ul>
</section>

<section>
	<h1><i class="fa fa-play"></i> DEMO</h1>
</section>

<section>
	<h1><i class="fa fa-check-circle-o"></i> Tester vos générateurs</h1>
</section>

<section>
	<h1>Tester quoi ?</h1>
	<ul class="steps">
		<li><p>présence ou absence de fichier</p></li>
		<li><p>contenu du fichier</p></li>
	</ul>
</section>

<section>
	<h1>Comment ?</h1>
	<ul class="steps">
		<li>Créer un répertoire de test</li>
		<li>Créer le générateur</li>
		<li>Mocker</li>
		<li>Appeler le générateur</li>
		<li>Vérifier les assertions</li>
	</ul>
</section>

<section id="test-helpers">
	<h1>Test Helpers</h1>
	<ul class="steps">
		<li>
			<pre><code class="javascript">
var helpers = require('yeoman-generator').test;
			</code></pre>
		</li>
	</ul>
</section>

<section>
	<pre><code class="javascript">
before(function (done) {

  helpers.run('../generators/app')
    .inDir('./tmp')
    .withOptions({ foo: 'bar' })
    .withArguments(['name-x'])
    .withPrompt({ coffee: false })
    .onEnd(done)

})
	</code></pre>
</section>

<section>
	<h1><i class="fa fa-lightbulb-o"></i> Conseil</h1>
	<ul class="steps">
		<li><p>Préférez les chemins absolus pour éviter les comportements imprévisibles</p></li>
		<li>
			<pre><code class="javascript smaller">
var path = require('path');

before(function (done) {

  helpers.run(path.join( __dirname, '../app'))
    .inDir(path.join( __dirname, './tmp'))
	...

})
			</code></pre>
		</li>
	</ul>
</section>

<section id="assert-helpers">
	<h1>Assert Helpers</h1>
	<ul class="steps">
		<li>
			<pre><code class="javascript">
var assert = require('yeoman-generator').assert;
			</code></pre>
		</li>
	</ul>
</section>

<section id="assert-api">
	<h1></h1>
	<ul class="steps">
		<li>
			<pre><code class="javascript">
assert.file(path);
			</code></pre></li>
		<li>
		<pre><code class="javascript">
assert.noFile(path);
			</code></pre></li>
		</li>
		<li>
			<pre><code class="javascript">
assert.fileContent(path, regex);
			</code></pre></li>
		</li>
		<li>
			<pre><code class="javascript">
assert.noFileContent(path, regex);
			</code></pre></li>
		</li>
	</ul>
</section>

<section>
	<h1><i class="fa fa-play"></i> DEMO</h1>
</section>

<section>
	<h1><i class="fa fa-gear"></i> Sub-generators</h1>
</section>

<section>
	<pre><code class="javascript">
yo generator:subgenerator "name"
	</code></pre>
</section>

<section>
	<h1>Exemples</h1>
	<ul class="steps">
		<li>
			<pre><code class="javascript">yo angular:filter "monFiltre"</code></pre></li>
		<li>
			<pre><code class="javascript">yo backbone:model "monModel"</code></pre>
		</li>
		</li>
		<li>
			<pre><code class="javascript">yo ember:controller "monController"</code></pre></li>
		</li>
		<li>
			<pre><code class="javascript"><b>yo ruban:slide "titreDuSlide"</b></code></pre></li>
		</li>
	</ul>
</section>

<section>
	<h1></h1>
	<ul class="steps">
		<li>
			<p>Fonctionne comme un générateur Yeoman</p>
		</li>
		<li>
			<pre><code class="javascript">
yeoman.generators.nameBase.extend({

})
			</code></pre>
		</li>
	</ul>
</section>

<section>
	<h1></h1>
	<ul class="steps">
		<li>
			<pre><code class="javascript">yo ruban:slide "titreDuSlide"</code></pre></li>
			<pre><code class="javascript">
yeoman.generators.nameBase.extend({
  step : function() {
      console.log(this.name); // titreDuSlide
  }
})
			</code></pre>
		</li>
		<li>
			<pre><code class="javascript">

			</code></pre>
		</li>
	</ul>
</section>

<section>
	<h1><i class="fa fa-play"></i> DEMO</h1>
</section>

<section>
	<h1><i class="fa fa-database"></i> Yeoman Storage API</h1>
</section>

<section>
	<p>Sauvegarder des données</p>
	<p>Partager des données entre générateur et sous-générateurs</p>
</section>

<section>
	<p>.yo-rc.json</p>
	<p>
		<pre><code class="json">
{
   "generator-backbone": {
      "requirejs": true,
      "coffee": true
   },
   "generator-gruntfile": {
      "compass": false
   }
}
		</code></pre>
	</p>
</section>

<section id="yeoman-storage-api">
	<h1></h1>
	<ul class="steps">
		<li>
			<p><pre><code class="javascript">this.config.set(key, value)</code></pre></p>
		</li>
		<li>
			<p><pre><code class="javascript">this.config.get(key)</code></pre></p>
		</li>
		</li>
		<li>
			<p><pre><code class="javascript">this.config.delete(key)</code></pre></li></p>
		</li>
	</ul>
</section>

<section>
	<h1><i class="fa fa-play"></i> DEMO</h1>
</section>

</body>
</html>